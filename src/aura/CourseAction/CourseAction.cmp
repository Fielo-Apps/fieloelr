<aura:component controller="CourseAction">
    <aura:attribute name="record" type="sObject"/>
    <aura:attribute name="name" type="String" />
    <aura:attribute name="config" type="String" />
    <aura:attribute name="fieldName" type="String" />
    <aura:attribute name="moduleNumber" type="String" />
    <aura:attribute name="moduleId" type="String" />
    
    <aura:handler name="init" action="{!c.doInit}" value="{!this}"/>
    
    <div class="fielo-course-action" data-module-id="{!v.moduleId}" data-member-id="{!v.config.memberId}">
        <aura:if isTrue="{!v.record.FieloELR__Status__c == 'Scheduled'}">
            <aura:if isTrue="{!v.record.FieloELR__SubscriptionMode__c == 'Automatic'}">
                <lightning:button label="{!v.config.label_viewModule + ' ' + v.moduleNumber}" name="{!v.config.label_viewModule + ' ' + v.moduleNumber}" variant="{!v.config.variant}" disabled="true" />
                <aura:set attribute="else">
                    <lightning:button label="{!v.config.label_joinCourse}" name="{!v.config.label_joinCourse}" variant="{!v.config.variant}" disabled="true"/>
                </aura:set>
            </aura:if>
            <aura:set attribute="else">
                <aura:if isTrue="{!v.record.FieloELR__SubscriptionMode__c == 'Automatic'}">
                    <lightning:button label="{!v.config.label_viewModule + ' ' + v.moduleNumber}" name="{!v.config.label_viewModule  + ' ' + v.moduleNumber}" onclick="{!c.gotoModuleDetail}" variant="{!v.config.variant}" />
                    <aura:set attribute="else">
                        <aura:if isTrue="{!v.config.activeViewName == 'availableCourses'}">
                            <lightning:button label="{!v.config.label_joinCourse}" name="{!v.config.label_joinCourse}" onclick="{!c.callJoinCourse}" variant="{!v.config.variant}" />
                            <aura:set attribute="else">
                                <lightning:button label="{!v.config.label_viewModule  + ' ' + v.moduleNumber}" name="{!v.config.label_viewModule  + ' ' + v.moduleNumber}" onclick="{!c.gotoModuleDetail}" variant="{!v.config.variant}" />
                            </aura:set>
                        </aura:if>
                        
                    </aura:set>
                </aura:if>
            </aura:set>
        </aura:if>
    </div>
</aura:component>